# Custom Commands

Cypress provides some really awesome functionality for creating [custom commands](1). In fact, all of the Cypress commands that we've used up to this point are defined using this commands API. We'll take advantage of the API in this exercise to create a custom `getByDataCy` command that will make our test logs more readable.

Let's start by stepping back again and thinking about how we want the syntax for our new custom command to look. I see two different ways that we can go with this. The first is to create a new command called `getByDataCy` that accepts the name of the `data-cy` attribute that we're looking for as the first parameter and an optional `options` parameter as the second parameter. The second approach is to overwrite the `get` command to perform some custom functionality if we pass in an object that contains a `dataCy` property. Like this: `cy.get({ dataCy: "gimmeTacos", text: "Steak and Cilantro" })`. I personally like the second option more because it's more concise and flexible. It's also a little bit harder to implement, so that's what we're going to implement for this exercise. If we can implement the harder of the two commands, then you should be able to implement the easier one on your own.

This exercise gets a little bit dicey, so feel free to look at the solution beforehand to get the couple of little tricky parts and then feel free to copy it on your own.

## Steps

1. Convert the calls to `getByDataCy` to use the syntax for our overwritten `get` command. Watch the spec fail and ensure that it fails as you expect.
2. Overwrite the `get` command. You can refer to the [docs](2) for how to do this. Note that `get` is a parent command, so overwritting it will be pretty much just like overwritting the `visit` command that the docs use as an example. You'll want to add this code to `cypress/support/commands.js` file.
3. Move the code from our custom function to our overwritten `get` command. ❄️ IMPORTANT: Note that the original implementation of the `get` command is passed as the first argument to the callback for our overwritten function. You'll need to swap out the `cy.get` calls in the overwritten command to use original function passed as the first parameter, or we'll run into a stack overflow error because the `cy.get` function will recusrively call itself indefinitely - which will cause the browser running our spec to freeze. ❄️ I also reccommend using the [rest parameter syntax]() to get the parameters in the command callback so that we can pass those parameters onto the original `get` implementation (minus the first parameter, which is the function itself) when an object with a `dataCy` property isn't provided.
4. Now, for the first slightly tricky part. We don't want to break the current functionality for the `get` command, so we'll need to make sure to only execute our custom logic if the user passes an object with the `dataCy` command. Once you've figured this out, take a look at your spec and see if it passes.
5. Now that we've added this sweet functionality to our `get` command, let's add a little bit of validation to help prevent people from using it incorrectly. If someone provides an object but doesn't provide a `dataCy` attribute, let's throw an error telling them that providing an object to the `get` command without a `dataCy` attribute isn't supported. Check to make sure that the error is thrown correctly when you pass an invalid object.
6. While our validation will help people figure out if they're using the command incorrectly, it would also be nice to make the logs more readable in the Cypress test runner so that it's evident that we're using some custom functionality in the `get` command. Cypress provides some really nice logging functionality that we can take advantage of. The docs for this functionality are a work-in-progress and explaining them in the steps here would get pretty wordy, so I recommend just taking a look at how this is done in the example solution and then reimplementing it on your own.
7. Now that we have our own logging, let's disable the logs when running the original function as part of our `dataCy` functionality. You can disable logging for `get` (and most Cypress commands) by passing an object that contains a `log` value set to `false`. If you rerun the spec, you should now only see your custom logging functionality.
8. Finally, write a plain `get` command to make sure that everything is still working.

[1]: https://docs.cypress.io/api/cypress-api/custom-commands.html#Syntax
[2]: https://docs.cypress.io/api/cypress-api/custom-commands.html#Overwrite-Existing-Commands
[3]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters
